<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Research — Angelika Manhart</title>
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet"/>
  <style>
    :root {
      --ink:      #0a1f44;
      --mid:      #2a4a6b;
      --muted:    #5b95b8;
      --accent:   #0d3b7a;
      --accent2:  #1a6fa8;
      --pale:     #ddeaf3;
      --white:    #ffffff;
      --bg:       #f0f6fa;
      --border:   #c8dde8;
      --serif:    'DM Serif Display', Georgia, serif;
      --sans:     'DM Sans', system-ui, sans-serif;
    }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-padding-top: 70px; }
    body { font-family: var(--sans); background: var(--white); color: var(--ink); font-size: 17px; line-height: 1.72; }

    /* NAV */
    nav {
      position: sticky; top: 0; z-index: 100;
      background: rgba(224,237,247,0.92); backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--border);
      display: flex; align-items: center; justify-content: space-between;
      padding: 0 5vw; height: 62px;
    }
    .nav-name { font-family: var(--serif); font-size: 1.05rem; color: var(--ink); text-decoration: none; display: flex; align-items: center; gap: 0.5rem; }
    .nav-portrait { width: 32px; height: 32px; border-radius: 50%; object-fit: cover; object-position: center 20%; border: 2px solid var(--border); }
    .nav-links { display: flex; gap: 2rem; list-style: none; }
    .nav-links a { font-size: 0.82rem; font-weight: 600; letter-spacing: 0.07em; text-transform: uppercase; color: var(--mid); text-decoration: none; transition: color 0.2s; }
    .nav-links a:hover { color: var(--accent); }
    .hamburger { display: none; }

    .container { max-width: 1140px; margin: 0 auto; padding: 0 5vw; }

    header { padding: 3rem 0 2rem; border-bottom: 1px solid var(--border); }
    .section-label { font-size: 0.73rem; font-weight: 700; letter-spacing: 0.18em; text-transform: uppercase; color: var(--accent2); margin-bottom: 0.5rem; }
    .section-title { font-family: var(--serif); font-size: clamp(1.7rem, 2.6vw, 2.3rem); color: var(--ink); margin-bottom: 0.9rem; }
    .section-intro { max-width: 720px; color: var(--mid); font-weight: 300; font-size: 1.05rem; line-height: 1.8; }

    /* HUB CIRCLES */
    .hub-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 2rem;
      padding: 3rem 0;
      justify-items: center;
    }
    .hub-card {
      background: rgba(255,255,255,0.92);
      border: 3px solid var(--accent2);
      border-radius: 50%;
      text-align: center;
      text-decoration: none;
      color: inherit;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      width: 220px;
      height: 220px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      position: relative;
      box-shadow: 0 8px 32px rgba(13,59,122,0.1);
      padding: 1.2rem;
      opacity: 0;
      animation: hubReveal 0.6s ease forwards;
      animation-delay: var(--delay);
    }
    @keyframes hubReveal { to { opacity: 1; } }

    .hub-card::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, var(--pale) 0%, transparent 100%);
      opacity: 0;
      transition: opacity 0.3s;
      border-radius: 50%;
    }
    .hub-card:hover::before { opacity: 1; }
    .hub-card:hover {
      border-width: 4px;
      box-shadow: 0 20px 60px rgba(13,59,122,0.18);
      transform: scale(1.08);
    }
    .hub-card.active {
      border-width: 4px;
      box-shadow: 0 0 0 5px rgba(26,111,168,0.2), 0 10px 40px rgba(13,59,122,0.18);
    }

    .hub-image {
      width: 80px;
      height: 80px;
      background: var(--pale);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 0.6rem;
      transition: transform 0.3s;
      position: relative;
      z-index: 1;
      flex-shrink: 0;
      overflow: hidden;
      border: 2px solid var(--white);
      box-shadow: 0 3px 10px rgba(13,59,122,0.1);
    }
    .hub-image img { width: 100%; height: 100%; object-fit: cover; }
    .hub-card:hover .hub-image { transform: rotate(5deg) scale(1.1); }

    .hub-card h3 {
      font-family: var(--serif);
      font-size: 0.95rem;
      color: var(--ink);
      margin-bottom: 0.25rem;
      position: relative;
      z-index: 1;
      line-height: 1.25;
    }
    .hub-card p {
      font-size: 0.78rem;
      color: var(--muted);
      font-weight: 300;
      position: relative;
      z-index: 1;
      line-height: 1.4;
    }

    /* THEME DETAIL PANEL */
    #theme-detail-panel {
      overflow: hidden;
      max-height: 0;
      opacity: 0;
      transition: max-height 0.5s ease, opacity 0.4s ease, margin 0.4s ease, padding 0.4s ease;
      padding: 0 2rem;
      scroll-margin-top: 80px;
    }
    #theme-detail-panel.open {
      opacity: 1;
      padding: 2rem;
      border: 1px solid var(--border);
      border-radius: 12px;
      background: var(--white);
      margin-bottom: 2rem;
      box-shadow: 0 4px 20px rgba(13,59,122,0.08);
    }
    .theme-detail-top { display: flex; align-items: center; justify-content: space-between; margin-bottom: 1.5rem; }
    .theme-detail-header { display: flex; align-items: center; gap: 1.2rem; }
    .theme-detail-icon {
      width: 56px; height: 56px; border-radius: 50%;
      border: 3px solid var(--accent2);
      overflow: hidden; flex-shrink: 0;
      display: flex; align-items: center; justify-content: center;
      background: var(--pale);
    }
    .theme-detail-icon img { width: 100%; height: 100%; object-fit: cover; }
    .theme-detail-title { font-family: var(--serif); font-size: 1.4rem; color: var(--ink); margin-bottom: 0.15rem; }
    .theme-detail-subtitle { font-size: 0.88rem; color: var(--muted); font-weight: 300; }
    .close-detail-btn {
      width: 36px; height: 36px; border-radius: 50%;
      border: 1px solid var(--border); background: var(--white);
      color: var(--mid); font-size: 1.2rem; cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      transition: all 0.2s;
    }
    .close-detail-btn:hover { border-color: var(--accent2); color: var(--accent2); }
    .theme-detail-desc { color: var(--mid); font-weight: 300; line-height: 1.75; margin-bottom: 2rem; font-size: 0.95rem; }
    .theme-detail-desc img { max-width: 100%; height: auto; border-radius: 8px; margin: 1rem 0; }
    .theme-detail-desc a { color: var(--accent2); text-decoration: none; font-weight: 500; }
    .theme-detail-desc a:hover { text-decoration: underline; }
    .theme-detail-desc .detail-banner { background: var(--bg); border-left: 4px solid var(--accent2); border-radius: 0 8px 8px 0; padding: 1.2rem 1.5rem; margin-bottom: 1.8rem; display: flex; flex-wrap: wrap; align-items: center; justify-content: space-between; gap: 0.8rem; }
    .theme-detail-desc .detail-banner p { font-size: 1rem; font-weight: 400; color: var(--ink); margin: 0; }
    .theme-detail-desc .detail-banner .project-number { font-size: 0.8rem; color: var(--muted); font-weight: 500; letter-spacing: 0.03em; }
    .detail-link-btn { display: inline-block; font-size: 0.75rem; font-weight: 600; letter-spacing: 0.05em; text-transform: uppercase; padding: 0.45rem 1rem; border: 1px solid var(--accent2); border-radius: 6px; color: var(--accent2); text-decoration: none !important; transition: all 0.2s; white-space: nowrap; }
    .detail-link-btn:hover { background: var(--accent2); color: var(--white) !important; }
    .theme-detail-desc h3 { font-family: var(--serif); font-size: 1.1rem; color: var(--ink); margin: 1.8rem 0 0.6rem; padding-bottom: 0.3rem; border-bottom: 2px solid var(--pale); }
    .theme-detail-desc h3:first-child { margin-top: 0; }
    .theme-detail-desc .detail-figure { margin: 1.2rem 0; text-align: center; }
    .theme-detail-desc .detail-figure img { width: 100%; max-width: 700px; margin: 0 auto; display: block; }
    .theme-detail-desc .detail-figure.small img { max-width: 280px; }
    .theme-detail-desc .detail-figure figcaption { font-size: 0.8rem; color: var(--muted); margin-top: 0.4rem; font-style: italic; }
    .theme-detail-desc .detail-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; align-items: start; margin: 1.2rem 0; }
    @media (max-width: 600px) { .theme-detail-desc .detail-row { grid-template-columns: 1fr; } }
    .theme-detail-desc h4 { font-family: var(--sans); font-size: 0.82rem; font-weight: 700; letter-spacing: 0.1em; text-transform: uppercase; color: var(--accent2); margin: 0 0 0.5rem; }
    .pub-list-heading { font-size: 0.78rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.08em; color: var(--accent2); margin-bottom: 1rem; }

    /* PUB ITEMS */
    .pub-list { display: flex; flex-direction: column; gap: 1.1rem; }
    .pub-item { background: var(--white); border: 1px solid var(--border); border-left: 3px solid var(--accent2); padding: 1.4rem 1.6rem; border-radius: 0 8px 8px 0; display: grid; grid-template-columns: 64px 1fr auto; gap: 0.5rem 1.2rem; align-items: start; }
    .pub-thumb { width: 64px; height: 64px; border-radius: 6px; background: var(--pale); border: 1px solid var(--border); display: flex; align-items: center; justify-content: center; overflow: hidden; flex-shrink: 0; }
    .pub-thumb img { width: 100%; height: 100%; object-fit: cover; }
    .pub-thumb svg { width: 28px; height: 28px; opacity: 0.35; }
    .pub-title-row { display: flex; align-items: baseline; gap: 0.6rem; flex-wrap: wrap; margin-bottom: 0.25rem; }
    .pub-title { font-family: var(--serif); font-size: 1rem; color: var(--ink); }
    .pub-tag { display: inline-block; font-size: 0.65rem; font-weight: 700; letter-spacing: 0.06em; text-transform: uppercase; padding: 0.15rem 0.55rem; border-radius: 4px; color: #fff; white-space: nowrap; vertical-align: middle; position: relative; top: -1px; }
    .pub-tag-data { background: #2e7d32; }
    .pub-tag-theorem { background: #c62828; }
    .pub-tag-other { background: #795548; }
    .pub-tag-collective { background: #1a6fa8; }
    .pub-tag-organelles { background: #7e6b9e; }
    .pub-tag-cytoskeleton { background: #0891b2; }
    .pub-tag-bacteria { background: #d97706; }
    .pub-tag-micromacro { background: #8b5cf6; }
    .pub-tag-theme-other { background: #64748b; }
    .pub-meta { font-size: 0.84rem; color: var(--muted); font-weight: 300; }
    .pub-meta strong { color: var(--mid); font-weight: 600; }
    .pub-year { font-size: 0.78rem; font-weight: 700; color: var(--accent2); letter-spacing: 0.06em; white-space: nowrap; padding-top: 0.2rem; }
    .pub-links { display: flex; gap: 0.5rem; margin-top: 0.65rem; flex-wrap: wrap; }
    .pub-link { font-size: 0.73rem; font-weight: 600; letter-spacing: 0.06em; text-transform: uppercase; padding: 0.2rem 0.6rem; border: 1px solid var(--border); border-radius: 4px; color: var(--mid); text-decoration: none; transition: all 0.2s; }
    .pub-link:hover { border-color: var(--accent2); color: var(--accent2); }

    footer { text-align: center; padding: 1.8rem 5vw; font-size: 0.78rem; color: var(--muted); border-top: 1px solid var(--border); }

    @media (max-width: 800px) {
      .nav-links {
        display: none;
        flex-direction: column;
        position: absolute;
        top: 62px; left: 0; right: 0;
        background: rgba(224,237,247,0.97);
        backdrop-filter: blur(12px);
        border-bottom: 1px solid var(--border);
        padding: 1rem 5vw;
        gap: 0.5rem;
      }
      .nav-links.open { display: flex; }
      .hamburger {
        display: flex; align-items: center; justify-content: center;
        background: none; border: none; cursor: pointer;
        width: 38px; height: 38px; padding: 0;
      }
      .hamburger svg { width: 22px; height: 22px; stroke: var(--ink); stroke-width: 2; stroke-linecap: round; }
      .hub-grid { grid-template-columns: repeat(2, 1fr); gap: 1.2rem; padding: 2rem 0; }
      .hub-card { width: 160px; height: 160px; padding: 0.8rem; }
      .hub-image { width: 56px; height: 56px; margin-bottom: 0.4rem; }
      .hub-card h3 { font-size: 0.82rem; }
      .hub-card p { font-size: 0.7rem; }
      #theme-detail-panel.open { padding: 1.5rem; }
      .pub-item { grid-template-columns: 48px 1fr auto; }
      .pub-thumb { width: 48px; height: 48px; }
      .pub-year { font-size: 0.72rem; }
    }
    @media (max-width: 480px) {
      .hub-grid { grid-template-columns: repeat(2, 1fr); gap: 1rem; }
      .hub-card { width: 140px; height: 140px; padding: 0.6rem; }
      .hub-image { width: 46px; height: 46px; margin-bottom: 0.3rem; }
      .hub-card h3 { font-size: 0.75rem; }
      .hub-card p { font-size: 0.65rem; }
    }
  </style>
</head>
<body>

  <nav>
    <a class="nav-name" href="index.html"><img class="nav-portrait" src="images/portrait_me.jpg" alt=""/>Angelika Manhart</a>
    <ul class="nav-links">
      <li><a href="index.html#about">About</a></li>
      <li><a href="research.html">Research</a></li>
      <li><a href="publications.html">Publications</a></li>
      <li><a href="outreach.html">Outreach & Art</a></li>
      <li><a href="index.html#team">Team</a></li>
      <li><a href="cv.html">CV</a></li>
      <li><a href="index.html#contact">Contact</a></li>
    </ul>
    <button class="hamburger" aria-label="Menu" onclick="document.querySelector('.nav-links').classList.toggle('open')">
      <svg viewBox="0 0 24 24" fill="none"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
    </button>
  </nav>
  <script>document.querySelector('.nav-links').addEventListener('click',function(e){if(e.target.tagName==='A')this.classList.remove('open');})</script>

<div class="container">
  <header>
    <p class="section-label">Focus Areas</p>
    <h2 class="section-title">Research</h2>
    <p class="section-intro">Explore my research themes and their connected publications. Click a theme to see details and related papers.</p>
    <a class="detail-link-btn" href="publications.html" style="margin-top: 1rem; display: inline-block;">See all publications &rarr;</a>
  </header>

  <div class="hub-grid" id="hubGrid"></div>

  <div id="theme-detail-panel">
    <div class="theme-detail-top">
      <div class="theme-detail-header">
        <div class="theme-detail-icon" id="detailIcon"></div>
        <div>
          <h2 class="theme-detail-title" id="detailTitle"></h2>
          <p class="theme-detail-subtitle" id="detailSubtitle"></p>
        </div>
      </div>
      <button class="close-detail-btn" onclick="closeThemeDetail()">&times;</button>
    </div>
    <div class="theme-detail-desc" id="detailDesc"></div>
    <div class="pub-list-heading" id="detailPubCount"></div>
    <div class="pub-list" id="detailPubList"></div>
  </div>
</div>

<footer>&copy; 2026 Manhart A &middot; University of Vienna &middot; Faculty of Mathematics</footer>

<script>
// ── DATA ──────────────────────────────────────────────────────────────────────
var themes = [
  {
    id: 'collective',
    name: 'Collective Dynamics',
    subtitle: 'Alignment & Pattern Formation',
    description: 'Collective Dynamics studies how complex patterns arise from individual interactions. The research projects here range from studying specific systems & organisms, to investigating how environmental interactions influence patterns, to investigating alignment mechanisms.',
    color: '#2563eb',
    thumb: 'images/research_thumbs/collective_thumb.png'
  },
  {
    id: 'cytoskeleton',
    name: 'Cytoskeleton',
    subtitle: 'Cell Migration & Fibre Dynamics',
    description: 'A cell\u2019s cytoskeleton allows it to perform various tasks, such as cell migration or position its cell organelles, such as nuclei. In this research we model the cytoskeleton using differential equations and study its properties and function.',
    color: '#059669',
    thumb: 'images/research_thumbs/cytoskeleton_thumb.png'
  },
  {
    id: 'bacteria',
    name: 'Bacteria',
    subtitle: 'Coordination & Waves',
    description: 'Myxobacteria are soil-living bacteria that can glide on 2D surfaces using different movement mechanisms. In different settings they show fascinating collective pattern which include clustering and wave formation. We used collision operators to describe bacteria interactions and derived continuum equations. Studying these revealed criteria and mechanisms for the appearance of the fascinating counter-propagating waves.',
    color: '#d97706',
    thumb: 'images/research_thumbs/myxo_thumb.png'
  },
  {
    id: 'organelles',
    name: 'Cell Organelles',
    subtitle: 'Nuclear Positioning & Scaling',
    description: 'The nucleus is a cell\u2019s central organ. Muscle cells can contain 10s\u2013100s of nuclei. Their position and size is important for muscle function & health. Using data & mathematical modelling, we investigate positioning and size scaling mechanism in single and multi-nucleated cells.',
    color: '#7e6b9e',
    thumb: 'images/research_thumbs/organelle_thumb.png'
  },
  {
    id: 'mohecce',
    name: 'MOHECCE',
    subtitle: 'Heterogeneous Cell Clusters in Cancer',
    description: 'Modelling Heterogeneous Cell Clusters and their Environment \u2014 funded by the Austrian Science Fund (FWF) as part of their ASTRA funding scheme (2026\u20132031).',
    richDescription: '<div class="detail-banner"><div><p>Modelling Heterogeneous Cell Clusters and their Environment (MOHECCE)</p><span class="project-number">FWF ASTRA 2026\u20132031 \u00b7 Project AST1156424</span></div><a class="detail-link-btn" href="https://www.fwf.ac.at/entdecken/auszeichnungen/fwf-astra-preise/2025" target="_blank">FWF ASTRA Award</a></div>' +
      '<h3>Background</h3>' +
      '<p>Cancer cell clusters are more successful at metastasizing than single cells. This interdisciplinary project combines mathematical modeling and simulation with experiments to understand collective cell migration. We investigate how cell properties, their environment, and cell\u2013cell communication shape collective behavior.</p>' +
      '<figure class="detail-figure"><img src="images/MOHECCE/fig_bio_overview2.png" alt="From cell signalling to individual behaviour to collective dynamics"/><figcaption>From cell signalling to individual cell behaviour to collective cell dynamics</figcaption></figure>' +
      '<h3>Guiding Questions</h3>' +
      '<p>How do cells self-organize into clusters, and what factors influence their formation? What advantages do clustered cells have compared to individual migrating cells? We focus on two key aspects: <em>cell state heterogeneity</em> and the <em>cluster environment</em>.</p>' +
      '<h3>Approach</h3>' +
      '<figure class="detail-figure"><img src="images/MOHECCE/fig_compare.png" alt="Models and data sources overview"/><figcaption>Combining mathematical models with experimental data sources</figcaption></figure>' +
      '<div class="detail-row">' +
        '<div><h4>Mathematical Methods</h4><p>Interacting particle models, differential equations (ODEs and PDEs), numerical simulations, and quantitative data analysis.</p>' +
        '</div>' +
        '<div><h4>Experimental Component</h4><p>Led by <a href="https://krebsforschung.meduniwien.ac.at/schwerpunkt/metasierung/juliane-winkler/" target="_blank">Juliane Winkler</a> at the Medical University of Vienna, examining how cell state and matrix conditions affect cell group properties and metastatic potential using breast cancer cell lines.</p></div>' +
      '</div>' +
      '<div style="display:flex; gap:1.5rem; justify-content:center; align-items:start; margin:1.2rem 0; flex-wrap:wrap;">' +
        '<figure class="detail-figure" style="flex:1; max-width:40%; min-width:200px;"><img src="images/MOHECCE/fig_math.png" alt="Mathematical methods"/></figure>' +
        '<figure class="detail-figure" style="flex:1; max-width:40%; min-width:200px;"><img src="images/MOHECCE/fig_exp.png" alt="Microscopy of cancer cells"/><figcaption>Breast cancer cells (microscopy)</figcaption></figure>' +
      '</div>',
    color: '#dc2626',
    thumb: 'images/research_thumbs/MOHECCE.png'
  },
  {
    id: 'other',
    name: 'Other',
    subtitle: 'Eye Development & More',
    description: 'Additional research on the development of the fruit fly eye and works related to past internships.',
    color: '#64748b',
    thumb: 'images/research_thumbs/other_thumb.png'
  }
];

var publications = [];
fetch('publications/publications.json')
  .then(function(r) { return r.json(); })
  .then(function(data) { publications = data; });

var BOOK_ICON_SVG = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M4 19.5A2.5 2.5 0 016.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 014 19.5v-15A2.5 2.5 0 016.5 2z"/></svg>';

var activeThemeId = null;
var closeTimeout = null;

// ── BUILD HUB CIRCLES ─────────────────────────────────────────────────────
var hubGrid = document.getElementById('hubGrid');
themes.forEach(function(theme, i) {
  var card = document.createElement('div');
  card.className = 'hub-card';
  card.style.cssText = '--delay: ' + (i * 0.08) + 's; border-color: ' + theme.color + ';';
  card.setAttribute('data-theme', theme.id);
  card.innerHTML =
    '<div class="hub-image"><img src="' + theme.thumb + '" alt="' + theme.name + '"></div>' +
    '<h3>' + theme.name + '</h3>' +
    '<p>' + theme.subtitle + '</p>';
  card.addEventListener('click', function() {
    if (activeThemeId === theme.id) {
      closeThemeDetail();
    } else {
      showThemeDetail(theme);
    }
  });
  hubGrid.appendChild(card);
});

// ── SHOW / CLOSE DETAIL ───────────────────────────────────────────────────
function showThemeDetail(theme) {
  activeThemeId = theme.id;

  // Update active state on hub cards
  document.querySelectorAll('.hub-card').forEach(function(card) {
    var isActive = card.getAttribute('data-theme') === theme.id;
    card.classList.toggle('active', isActive);
    card.style.borderColor = isActive ? theme.color : themes.find(function(t) { return t.id === card.getAttribute('data-theme'); }).color;
  });

  // Populate panel
  var panel = document.getElementById('theme-detail-panel');
  var iconEl = document.getElementById('detailIcon');
  iconEl.style.borderColor = theme.color;
  iconEl.innerHTML = '<img src="' + theme.thumb + '" alt="' + theme.name + '">';

  document.getElementById('detailTitle').textContent = theme.name;
  document.getElementById('detailSubtitle').textContent = theme.subtitle;

  var descEl = document.getElementById('detailDesc');
  if (theme.richDescription) {
    descEl.innerHTML = theme.richDescription;
  } else {
    descEl.textContent = theme.description;
  }

  var themePubs = publications.filter(function(p) { return p.themes.indexOf(theme.id) !== -1; });
  themePubs.sort(function(a, b) { return b.year - a.year; });
  document.getElementById('detailPubCount').textContent = 'Publications (' + themePubs.length + ')';
  document.getElementById('detailPubList').innerHTML = themePubs.map(function(p) {
    return renderPubItem(p);
  }).join('');

  if (closeTimeout) { clearTimeout(closeTimeout); closeTimeout = null; }

  panel.classList.add('open');
  panel.style.opacity = '1';
  panel.style.maxHeight = panel.scrollHeight + 2000 + 'px';

  setTimeout(function() {
    panel.scrollIntoView({ behavior: 'smooth', block: 'start' });
  }, 200);
}

function closeThemeDetail() {
  activeThemeId = null;
  document.querySelectorAll('.hub-card').forEach(function(card) { card.classList.remove('active'); });

  var panel = document.getElementById('theme-detail-panel');
  panel.style.maxHeight = '0';
  panel.style.opacity = '0';
  if (closeTimeout) clearTimeout(closeTimeout);
  closeTimeout = setTimeout(function() { panel.classList.remove('open'); closeTimeout = null; }, 500);
}

// ── RENDER PUB ITEM ───────────────────────────────────────────────────────
function renderPubItem(p) {
  var tagClass = p.category === 'theorem' ? 'pub-tag-theorem' : (p.category === 'data' ? 'pub-tag-data' : 'pub-tag-other');
  var tagLabel = p.category === 'theorem' ? 'Theorems' : (p.category === 'data' ? 'Data' : 'Other');
  var themeTagMap = { collective: 'Collectivity', organelles: 'Organelles', cytoskeleton: 'Cytoskeleton', bacteria: 'Bacteria', micromacro: 'Micro-macro', other: 'Other' };
  var themeClassMap = { collective: 'pub-tag-collective', organelles: 'pub-tag-organelles', cytoskeleton: 'pub-tag-cytoskeleton', bacteria: 'pub-tag-bacteria', micromacro: 'pub-tag-micromacro', other: 'pub-tag-theme-other' };
  var themeTagsHtml = '';
  if (p.themes) {
    p.themes.forEach(function(t) {
      if (themeTagMap[t]) themeTagsHtml += '<span class="pub-tag ' + themeClassMap[t] + '">' + themeTagMap[t] + '</span>';
    });
  }
  var thumbHtml = p.thumbnail
    ? '<img src="' + p.thumbnail + '" alt="thumbnail"/>'
    : BOOK_ICON_SVG;
  var linksHtml = '';
  if (p.pdfUrl) linksHtml += '<a class="pub-link" href="' + p.pdfUrl + '" target="_blank">PDF</a>';
  if (p.doi) linksHtml += '<a class="pub-link" href="https://doi.org/' + p.doi + '" target="_blank">DOI</a>';

  return '<div class="pub-item">' +
    '<div class="pub-thumb">' + thumbHtml + '</div>' +
    '<div>' +
      '<div class="pub-title-row"><p class="pub-title">' + p.title + '</p><span class="pub-tag ' + tagClass + '">' + tagLabel + '</span>' + themeTagsHtml + '</div>' +
      '<p class="pub-meta">' + p.authors + ' &middot; <strong>' + p.journal + '</strong></p>' +
      (linksHtml ? '<div class="pub-links">' + linksHtml + '</div>' : '') +
    '</div>' +
    '<span class="pub-year">' + p.year + '</span>' +
  '</div>';
}

// ── ESC TO CLOSE ──────────────────────────────────────────────────────────
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') closeThemeDetail();
});
</script>
</body>
</html>